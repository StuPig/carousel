(function(e,t){$.carousel=function(e,t){var n=this,r=$(e),i=$.extend({},$.carousel.defaults,t),s,o,u;s=function(e,t){var n="";if(t.snippet){n=t.snippet}else{t.items.forEach(function(e,t){n+='                        <li class="animation'+t+'">                            <img src="'+e.url+'" />                        </li>                    '})}if(~e.find(".carousel").length){n='<div class="carousel"><div class="carousel-mask"><ul class="carousel-list">'+n+"</ul></div>"+(t.progressBar?'<div class="progress-bar"></div>':"")+"</div>";e.html(n)}else{e.find(".carousel-list").html(n)}};o=function(e,t){var n=e.find(".carousel-list>li").length,r='<ol class="indexes">';for(var i=0;i<n;i++){r+="<li></li>"}r+="</ol>";e.append(r)};u=function(e,t){var n=e.find(".carousel-list>li").length,r=t.itemShowTime+t.itemTransferTime,i=n*r,s=+(100/n).toFixed(0),o=s/r,u=t.direction==="horizontal"?"right":"top",a=t.direction==="horizontal"?t.width:t.height,f="",l="";if(t.transfer==="fade")a=0;f+=".carousel {background:#000; height:"+t.height+"px; width:"+t.width+"px; margin:0 auto; overflow:visible; position:relative; } .carousel-mask {overflow:hidden; height:"+t.height+"px; } .carousel-list {margin:0; padding:0; position:relative; } .carousel-list>li {position:absolute; list-style:none; }";if(t.progressBar)f+=".progress-bar {position:relative; top:-"+(t.progressBar.height||5)+"px; height:"+(t.progressBar.height||5)+"px; background:"+(t.progressBar.background||"#00a3ce")+"; -webkit-animation:fullexpand 25s "+(t.progressBar.effect||"ease-out")+" infinite; }@-webkit-keyframes fullexpand {0%, 20%, 40%, 60%, 80%, 100% { width:0%; opacity:0; } 4%, 24%, 44%, 64%, 84% { width:0%; opacity:0.3; } 16%, 36%, 56%, 76%, 96% { width:100%; opacity:0.7; } 17%, 37%, 57%, 77%, 97% { width:100%; opacity:0.3; } 18%, 38%, 58%, 78%, 98% { width:100%; opacity:0; } }";for(var c=0;c<n;c++){f+=".carousel li.animation"+c+"{-webkit-animation:cycle"+c+" "+i+"s "+t.effect+" infinite;}\n@-webkit-keyframes cycle"+c+"{\n";if(t.indexes)l+=".indexes>li:nth-child("+(c+1)+") {-webkit-animation: index"+c+" "+i+"s ease infinite;}\n@-webkit-keyframes index"+c+"{\n";if(c===0){f+="0% { "+u+":0; }\n";f+=o+"% { "+u+":0px; }\n";f+=s-o+"% { "+u+":0; opacity:1; z-index:0; }\n";f+=s+"% { "+u+":"+a+"px; opacity:0; z-index:0; }\n";f+=s+1+"% { "+u+":-"+a+"px; opacity:0; z-index:-1; }\n";f+=100-o+"% {"+u+":-"+a+"px; opacity:0; z-index:0; }\n";f+="100% { "+u+":0; opacity:1; }\n";if(t.indexes)l+=100-o+"%, "+(s-o)+"% { background:"+t.indexes.activeBackground+";}\n"+s+"%, "+(100-o)+"% {background:"+t.indexes.normalBackground+"; }}\n"}else{f+="0% { "+u+":-"+a+"px; opacity:0; }\n";f+=c*s-o+"% { "+u+":-"+a+"px; opacity:0; }\n";f+=c*s+"% { "+u+":0; opacity:1; }\n";f+=c*s+o+"% { "+u+":0; opacity:1; }\n";f+=(c+1)*s-o+"% { "+u+":0; opacity:1; z-index:0; }\n";if(c===n-1){f+="100%{ "+u+":"+a+"px; opacity:0; z-index:0; }\n"}else{f+=(c+1)*s+"% { "+u+":"+a+"px; opacity:0; z-index:0; }\n";f+=(c+1)*s+1+"% { "+u+":-"+a+"px; opacity:0; z-index:-1; }\n";f+="100%{ "+u+":-"+a+"px; opacity:0; z-index:-1; }\n"}if(t.indexes)l+=c*s-o+"%, "+((c+1)*s-o)+"% {background:"+(t.indexes.activeBackground||"red")+"; }\n "+(c+1)*s+"%, "+(c*s-o)+"% {\nbackground:"+(t.indexes.normalBackground||"#ccc")+";}}\n"}f+="}\n"}if(t.indexes){l=".indexes {display: -webkit-box; margin:0 auto; height:"+(t.indexes.height||12)+"px; width:"+t.width+"px; padding:0; list-style: none; } .indexes>li {-webkit-box-flex:1; background: "+(t.indexes.background||"#ccc")+"; }"+l;f+=l}if(~$(".carousel-style").length){f='<style class="carousel-style">'+f+"</style>";$(document.body).append(f)}else{$(".carousel-style").html(f)}};s(r,i);if(i.indexes)o(r,i);u(r,i)};$.carousel.defaults={width:680,height:320,itemShowTime:3,itemTransferTime:2,direction:"horizontal",transfer:"fade",effect:"linear",snippet:"",progressBar:{height:5,effect:"ease-out",background:"#000"},indexes:{height:12,activeBackground:"#00a3ce",normalBackground:"#ccc"},items:[]};$.fn.carousel=function(e){new $.carousel(this,e);return this}})(window,document)
